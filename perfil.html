<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <title>Login</title>
  </head>
  <body>
    <div class="background-nav">
      <header>
        <div class="container">
          <nav>
            <div class="col-1" id="logo">
              <a href="index.html">
                <img src="./images/logo.png" />
              </a>
            </div>
            <div class="container-fluid" id="navbar">
              <ul>
                <li><a href="coletivo.html"> O Coletivo</a></li>
                <li><a href="historia.html"> História</a></li>
                <li><a href="apoie.html"> Apoie</a></li>
                <li><a href="loja.html"> Loja</a></li>
                <li><a href="eventos.html"> Eventos</a></li>
                <li><a href="noticias.html"> Notícias</a></li>
                <div class="col-1" id="imagens-da-nav">
                  <a href="carrinho.html">
                    <img src="./images/carrinho.png" />
                  </a>
                  <a href="perfil.html">
                    <img src="./images/usuario.png" />
                  </a>
                </div>
              </ul>
            </div>
          </nav>
        </div>
      </header>
    </div>

    <div id="perfil">
      <div id="bodyPerfil">
        <h1 id="bemvindo">Bem vindo,</h1>
        <p id="email">Email:</p>

        <button id="logoutButton">Logout</button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const user = JSON.parse(localStorage.getItem("user"));

        if (!user) {
          window.location.href = "login.html";
          return;
        }

        document.getElementById(
          "bemvindo"
        ).textContent = `Bem vindo, ${user.nome}`;
        document.getElementById("email").textContent = `Email: ${user.email}`;
        document
          .getElementById("logoutButton")
          .addEventListener("click", () => {
            const confirmLogout = confirm("Você tem certeza que deseja sair?");
            if (confirmLogout) {
              localStorage.removeItem("user");
              window.location.href = "login.html";
            }
          });
      });
    </script>
  </body>
</html>
